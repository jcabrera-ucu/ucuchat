El tratado de Versalles, ajustado en marzo de 1701 y ampliado a lo largo de 1702, compuso una alianza entre el rey de Francia Luis XIV y Felipe V de España, por una parte, con el príncipe elector de Baviera Maximiliano II Manuel por la otra, en vísperas de la guerra de sucesión española.
Según los términos del acuerdo, el elector de Baviera daría su apoyo político y militar a la coalición franco-española en la guerra inminente, a cambio de la cesión a su favor de los Países Bajos españoles.
El acuerdo se vería roto en 1704 tras la ocupación de Baviera por las fuerzas del Sacro Imperio Romano Germánico.
La cesión de los territorios prometidos se haría efectiva en 1712.
Desde antes de la muerte sin descendencia de Carlos II de España en noviembre de 1700, las principales potencias de Europa se interesaron en la cuestión de su sucesión.
Inglaterra y las Provincias Unidas miraban con recelo la posibilidad de que Luis de Francia (hijo del rey Luis XIV) accediera al trono español, uniendo así las coronas española y francesa en una potencia cuyo excesivo poder supondría una amenaza para el equilibrio europeo.
El Sacro Imperio Romano Germánico abogaba por la ocupación de la corona española por Carlos de Austria, hijo del emperador Leopoldo I.
En su testamento, Carlos II nombró como su sucesor a Felipe de Anjou (segundo hijo de Luis de Francia), a condición de que renunciase al trono francés.
En diciembre de 1700 el abuelo de éste, Luis XIV, declaró que mantendría los derechos de su nieto a la corona de Francia, lo que fue interpretado por Inglaterra, las Provincias Unidas y el Sacro Imperio Romano Germánico como la antesala de la temida unión hispano-francesa.
En previsión de una guerra inminente, Luis XIV y Felipe comenzaron a pactar alianzas con los países del entorno.
Maximiliano II Manuel, elector de Baviera, era tío de Felipe por parte de la madre de éste María Ana Cristina de Baviera, y gobernador general de los Países Bajos españoles.
El 9 de marzo de 1701 se firmó el primer acuerdo, originalmente firmado solo por Francia y Baviera, en las siguientes condiciones:
Felipe V se adheriría al acuerdo el 7 de abril del mismo año.
En su accesión al tratado convino en transferir los ingresos procedentes de las provincias de Henao y Flandes a Maximiliano, en pago por la deuda contraída con éste por Carlos II.
En julio de 1701 se produjeron los primeros enfrentamientos armados entre las tropas del Sacro Imperio y las de Francia, en el norte de Italia, en las batallas de Carpi, Chiari y Cremona.
En septiembre del mismo año, Gran Bretaña, el Sacro Imperio Romano Germánico y las Provincias Unidas de los Países Bajos renovaron la Gran Alianza que mantenían desde 1689 mediante la firma del tratado de La Haya.
En mayo de 1702, la alianza así formada declaró oficialmente la guerra a España y Francia.
Ante el desarrollo de los acontecimientos, el 17 de junio de 1702 se añadieron nuevos artículos al tratado:
Todavía el 7 de noviembre del mismo año se añadirían nuevas cláusulas al tratado:
Tras la derrota del ejército bávaro en la batalla de Höchstädt en agosto de 1704 y la firma del tratado de Ilbesheim al mes siguiente, el electorado de Baviera quedó bajo la ocupación militar del Sacro Imperio Romano Germánico.
Maximiliano II Manuel, al igual que su hermano el elector de Colonia José Clemente de Baviera, serían proscritos y desterrados de sus posesiones por la Dieta Imperial en 1706, por su alianza con Francia y España.
En virtud de los acuerdos establecidos por este tratado, en 1712 los Países Bajos españoles fueron cedidos a Maximiliano II Manuel.
Aunque en ese momento solo el Ducado de Luxemburgo y Namur no estaban ocupados por las tropas austracistas.